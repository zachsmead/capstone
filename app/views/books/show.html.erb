<head>
    <title><%= @book.title %></title>
    <script src="<%= @book.book_cloud_url %>"></script>
    
    <!-- <script src="https://s3-us-west-1.amazonaws.com/projectgutenbergtest/book_clouds/pride_and_prejudice.js"></script> -->
</head>
  <body>
    <div class="header-box">
      <h1><a class="header-link" href="<%= @book.url %>"><%= @book.title.upcase %></a></h1>
    </div>

    <div class="text-center">

    <div id="text-analysis">
        <%= @test %>
    </div>

    <div class="example_div"></div>

    <script type="text/javascript">
      // var tooltip = d3.select("body")
      //   .append("div")
      //   .style("position", "absolute")
      //   .style("z-index", "10")
      //   .style("visibility", "hidden")
      //   .text("a simple tooltip");
        
      // var sampleSVG = d3.select(".example_div")
      //   .append("svg:svg")
      //   .attr("class", "sample")
      //   .attr("width", 300)
      //   .attr("height", 300);    
        
      // d3.select(".example_div svg")
      //   .append("svg:circle")
      //   .attr("stroke", "black")
      //   .attr("fill", "aliceblue")
      //   .attr("r", 50)
      //   .attr("cx", 52)
      //   .attr("cy", 52)
      //   .on("mouseover", function(){return tooltip.style("visibility", "visible");})
      //   .on("mousemove", function(){return tooltip.style("top", (event.pageY-10)+"px").style("left",(event.pageX+10)+"px");})
      //   .on("mouseout", function(){return tooltip.style("visibility", "hidden");});
    </script>


    
    <script>// make a wordcloud id in css</script>

    <div class="card" id="wordcloud"></div>

    <script>
      d3.wordcloud()
        .size([1220, 400])
        .spiral('archimedean')
        .scale('sqrt')
        .font('Lucida-Sans-Unicode')
        .fill(d3.scale.ordinal().range(["#020202", "#2d2d2d", "#545454", "#7a7a7a", "#9e9e9e", "#aaaaaa"])) // grayscale
        // .fill(d3.scale.ordinal().range(["#080063", "#180e87", "#2a1eb2", "#4236c4", "#5e53d1", "#8d83f7"])) // blue
        // .fill(d3.scale.ordinal().range(["#4016fc", "#e2122d", "#136300", "#ad42f4", "#f77810", "#fc077d"])) // rainbow
        .words(words)
        .onwordclick(function(d, i) {
          d3.tip().show();
        })
        .start();
    </script>
    </div>
  </body>